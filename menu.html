<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    />
    <link rel="stylesheet" href="style.css" />
    <title>LazShopee</title>
  </head>
  <body>
    <div class="background-image"></div>
    <main class="container">
      <div class="menu">
        <img src="LAZSHOPEE_LOGO.png" alt="LOGO" class="logo"/>
        <h1 class="menu-group-heading"><center>PRODUCTS</center></h1>
        <h2 class="menu-group-heading"><center><i>Jeans 501</i></center></h2>
        <div class="menu-group">
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-id="jeans-1" data-price="4999" data-name="1. Levi's Men's 501 Adobo" data-stock="10">
            <img
              src="levis-jeans1.jpg"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">1. Levi's Men's 501
                  </span>
                <span class="menu-item-price">₱4,999</span>
              </h3>
              
              <p class="menu-item-desc">
                Original Jeans
              </p>
              <span class="stock-count">Stocks: 10</span>
              <div>
                <label for="quantity-jeans-1">Quantity:</label>
                <input type="number" id="quantity-jeans-1" class="quantity-input" data-price="4999">
              </div>
            </div>
          </div>
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-id="jeans-2" data-price="2999.50" data-name="2. Levi's® Men's 501®" data-stock="20">
            <img
              src="levis-mens-501-original-jeans2.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">2. Levi's® Men's 501® </span>
                <span class="menu-item-price">₱2,999.50</span>
              </h3>
              <p class="menu-item-desc">
                Original Jeans (50% off)
              </p>
              <span class="stock-count">Stocks: 20</span>
              <div>
                <label for="quantity-jeans-2">Quantity:</label>
                <input type="number" id="quantity-jeans-2" class="quantity-input" data-price="2999.50">
              </div>
            </div>
          </div>
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-id="jeans-3"data-price="4299" data-name="3. Levi's® Men's 501®" data-stock="19">
            <img
              src="levis-mens-501-original-jeans3.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">3. Levi's® Men's 501®</span>
                <span class="menu-item-price">₱4,299</span>
              </h3>
              <p class="menu-item-desc">
                Original Jeans (20% off)
              </p>
              <span class="stock-count">Stocks: 19</span>
              <div>
                <label for="quantity-jeans-3">Quantity:</label>
                <input type="number" id="quantity-jeans-3" class="quantity-input" data-price="4299">
              </div>
            </div>
          </div>
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-id="jeans-4" data-price="3999" data-name="4. Levi's® Men's 501®" data-stock="15">
            <img
              src="levis-mens-skate-501-jeans4.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">4. Levi's® Men's 501®</span>
                <span class="menu-item-price">₱3,999</span>
              </h3>
              <p class="menu-item-desc">
                Original Jeans (20% off)
              </p>
              <span class="stock-count">Stocks: 15</span>
              <div>
                <label for="quantity-jeans-4">Quantity:</label>
                <input type="number" id="quantity-jeans-4" class="quantity-input" data-price="3999">
              </div>
            </div>
          </div>
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-id="jeans-5" data-price="3999" data-name="5. Levi's® Men's 501®" data-stock="15">
            <img
              src="levis-mens-501-original-jeans-5.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">5. Levi's® Men's 501®</span>
                <span class="menu-item-price">₱3,999</span>
              </h3>
              <p class="menu-item-desc">
               Original Jeans
               </p>
               <span class="stock-count">Stocks: 15</span>
               <div>
                <label for="quantity-jeans-5">Quantity:</label>
                <input type="number" id="quantity-jeans-5" class="quantity-input" data-price="3999">
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div class="menu">
        <h2 class="menu-group-heading"><center><i>T-Shirts</i></center></h2>
        <div class="menu-group">
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-id="shirt-1" data-price="2699" data-name="1. Stussy Tough Gear Tee" data-stock="13"> 
            <img
              src="Stussy1.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">1. Stussy Tough Gear Tee</span>
                <span class="menu-item-price">₱2,699</span>
              </h3>
              <p class="menu-item-desc">
                Oversized tee in piece dyed cotton with screenprinted graphics.
              </p>
              <span class="stock-count">Stocks: 13</span>
              <div>
                <label for="quantity-tshirt-1">Quantity:</label>
                <input type="number" id="quantity-tshirt-1" class="quantity-input" data-price="2699">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="2699" data-name="2. Stussy Tough Gear Tee" data-stock="12">
            <img
              src="Stussy2.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">2. Stussy Tough Gear Tee</span>
                <span class="menu-item-price">₱2,699</span>
              </h3>
              <p class="menu-item-desc">
                Oversized tee in piece dyed cotton with screenprinted graphics.
              </p>
              <span class="stock-count">Stocks: 12</span>
              <div>
                <label for="quantity-tshirt-2">Quantity:</label>
                <input type="number" id="quantity-tshirt-2" class="quantity-input" data-price="2699">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="2699" data-name="3. Stussy Basic Tee" data-stock="5">
            <img
              src="Stussy3.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">3. Stussy Basic Tee Originals</span>
                <span class="menu-item-price">₱2,699</span>
              </h3>
              <p class="menu-item-desc">
                Oversized tee in piece dyed cotton with screenprinted graphics.
              </p>
              <span class="stock-count">Stocks: 5</span>
              <div>
                <label for="quantity-tshirt-3">Quantity:</label>
                <input type="number" id="quantity-tshirt-3" class="quantity-input" data-price="2699">
              </div>
            </div>
          </div>



        </div>
      </div>
      <hr>
      <div class="menu">
        <h2 class="menu-group-heading"><i><center>Perfume</center></i></h2>
        <div class="menu-group">
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="8650" data-name="Gentleman Society Eau de Parfumn" data-stock="4">
            <img
              src="GentlemanSociety.jpg"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Gentleman Society Eau de Parfumn</span>
                <span class="menu-item-price">₱8650</span>
              </h3>
              <p class="menu-item-desc">
                Expressing the unique know-how of Givenchy, Gentleman Society is composed of exceptional raw materials.
              </p>
              <span class="stock-count">Stocks: 4</span>
              <div>
                <label for="quantity-perfume-1">Quantity:</label>
                <input type="number" id="quantity-perfume-1" class="quantity-input" data-price="8650">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="3900" data-name="Eau De Cédrat Eau De Toilette" data-stock="6">
            <img
              src="Cedrat.jpg"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Eau De Cédrat Eau De Toilette</span>
                <span class="menu-item-price">₱3,900</span>
              </h3>
              <p class="menu-item-desc">
                Inspired by the cedrat – an eminently masculine citrus fruit with a thick, rough peel – Eau de Cédrat captures the rawness of nature, full of contrasts and bursting with energy. 
              </p>
              <span class="stock-count">Stocks: 6</span>
              <div>
                <label for="quantity-perfume-2">Quantity:</label>
                <input type="number" id="quantity-perfume-2" class="quantity-input" data-price="3900">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="5650" data-name="Eau De Toilette Men" data-stock="22">
            <img
              src="Cedrat.jpg"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Eau De Toilette Men</span>
                <span class="menu-item-price">₱5,650</span>
              </h3>
              <p class="menu-item-desc">
                Charriol Men is an edition for men, presented in 2008 and created by Dominique Ropion. This fragrance features aromas of pear, lemon, green leaves, violet leaves, rose, marigold, cedar, amber and musk.
              </p>
              <span class="stock-count">Stocks: 22</span>
              <div>
                <label for="quantity-perfume-3">Quantity:</label>
                <input type="number" id="quantity-perfume-3" class="quantity-input" data-price="5650">
              </div>
            </div>
          </div>

        </div>
      </div>


      <div class="menu">
        <h2 class="menu-group-heading"><i><center>Sando</center></i></h2>
        <div class="menu-group">
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="1295" data-name="Nike Pro Men's Dri-FIT" data-stock="32">
            <img
              src="nikesando1.png"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Nike Pro Men's Dri-FIT</span>
                <span class="menu-item-price">₱1,295</span>
              </h3>
              <p class="menu-item-desc">
                The Nike Pro collection means feeling confident no matter where you are on your workout journey. This slim-fitting sleeveless top has a smooth and stretchy feel to keep you comfortable through the sports and activities you love.
              </p>
              <span class="stock-count">Stocks: 32</span>
              <div>
                <label for="quantity-sando-1">Quantity:</label>
                <input type="number" id="quantity-sando-1" class="quantity-input" data-price="1295">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="1295" data-name="Nike Dri-FIT Legend" data-stock="33">
            <img
              src="nikesando2.png"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Nike Dri-FIT Legend</span>
                <span class="menu-item-price">₱1,295</span>
              </h3>
              <p class="menu-item-desc">
                A sweat-wicking legend returns with an updated look and feel. It's soft in all the right ways, with a more relaxed, looser fit than previous versions so you can move through your reps without missing a beat.
              </p>
              <span class="stock-count">Stocks: 33</span>
              <div>
                <label for="quantity-sando-2">Quantity:</label>
                <input type="number" id="quantity-sando-2" class="quantity-input" data-price="1295">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="2895" data-name="Nike Alate" data-stock="44">
            <img
              src="nikesando3.png"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Nike Alate</span>
                <span class="menu-item-price">₱2,895</span>
              </h3>
              <p class="menu-item-desc">
                Move effortlessly from your morning walk to all the activities that follow in this stretchy, sweat-wicking tank top that feels like a second skin. 
              </p>
              <span class="stock-count">Stocks: 44</span>
              <div>
                <label for="quantity-sando-3">Quantity:</label>
                <input type="number" id="quantity-sando-3" class="quantity-input" data-price="2895">
              </div>
            </div>
          </div>

        </div>
      </div>





      <div class="menu">
        <h2 class="menu-group-heading"><i><center>Toys</center></i></h2>
        <div id="toys" class="menu">
        <div class="menu-group">
          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="1000" data-name="Bugatti Vision GT Supercar" data-stock="33">
            <img
              src="toy1.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Bugatti Vision GT Supercar</span>
                <span class="menu-item-price">₱1,000</span>
              </h3>
              <p class="menu-item-desc">
                1/32 Zinc Alloy Die Casting Pull Back Car Model Toy Sound and Light for Boy Girl Gift
              </p>
              <span class="stock-count">Stocks: 33</span>
              <div>
                <label for="quantity-toy-1">Quantity:</label>
                <input type="number" id="quantity-toy-1" class="quantity-input" data-price="1000">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="1000" data-name="Lambo Sian FKP37 Sports Model Car" data-stock="22">
            <img
              src="toy2.webp"
              alt="Black Placeholder Image"
              class="menu-item-img"
            />
            <div class="menu-item-text">
              <h3 class="menu-item-heading">
                <span class="menu-item-name">Lambo Sian FKP37 Sports Model Car</span>
                <span class="menu-item-price">₱1,000</span>
              </h3>
              <p class="menu-item-desc">
                Zinc Alloy Simulation Casting Pull Back Vehicles,1:32 Scale Supercar Toys with Lights and Music Sound for Kids Boys Girls Gift (Red)
              </p>
              <span class="stock-count">Stocks: 22</span>
              <div>
                <label for="quantity-toy-2">Quantity:</label>
                <input type="number" id="quantity-toy-2" class="quantity-input" data-price="1000">
              </div>
            </div>
          </div>

          <div class="menu-item">
            <input type="checkbox" class="menu-item-checkbox" data-price="1000" data-name="Pagani Huayra BC Diecast Model" data-stock="12">
            <img src="toy3.webp" alt="Black Placeholder Image" class="menu-item-img"/>
            <div class="menu-item-text">
                <h3 class="menu-item-heading">
                    <span class="menu-item-name">Pagani Huayra BC Diecast Model</span>
                    <span class="menu-item-price">₱1,000</span>
                </h3>
                <p class="menu-item-desc">
                    Toy Sports Super Car 1:38- White
                </p>
                <span class="stock-count">Stocks: 12</span>
                <div>
                    <label for="quantity-toy-3">Quantity:</label>
                    <input type="number" id="quantity-toy-3" data-id="toy-3" class="quantity-input" data-price="1000">
                </div>
            </div>
        </div>

        </div>
      </div>
      <button onclick="window.open('stockmanagement.html', '_blank')">Add Stocks</button>

      <!-- Add a receipt section -->
      <div class="receipt">
        <h2>Receipt</h2>
        <ul id="receipt-items"></ul>
        <p>Total: <span id="total">₱0</span></p>
      </div>
	<div class="discount_section">
	<h3> DISCOUNT TYPE </h3>
	<select id="discount-select"><br><br><br><br><br><br>
	<option value="none"> None </option>
	<option value="senior"> Senior - 20% </option>
	<option value="pwd"> PWD - 30% </option>
	<option value="student"> Student - 10% </option>
	</select>
	</div>
    <div>
      <label for="payment">Enter Payment Amount:</label>
      <input type="number" id="payment" />
      <button onclick="calculateChange()">Calculate Change</button>
    </div>
    <p>Change: <span id="change">₱0</span></p>
  </div>
</main>
</body>
<!-- Add script tag for JavaScript -->
<script>
  
  // Get all checkboxes, quantity inputs, and stock counts
const checkboxes = document.querySelectorAll('.menu-item-checkbox');
const quantityInputs = document.querySelectorAll('.quantity-input');
const stockCounts = document.querySelectorAll('.stock-count');

// Store the original stock counts
const originalStocks = Array.from(checkboxes).map(checkbox => parseInt(checkbox.getAttribute('data-stock'), 10));

function scrollToSection(sectionId) {
  const section = document.getElementById(sectionId);
  if (section) {
    const yOffset = -50; // Adjust this value to include any fixed headers
    const y = section.getBoundingClientRect().top + window.pageYOffset + yOffset;
    window.scrollTo({top: y, behavior: 'smooth'});
  }
}

// Add event listener to each checkbox and quantity input
checkboxes.forEach((checkbox, index) => {
  checkbox.addEventListener('change', () => updateReceipt(false));
});

quantityInputs.forEach((input, index) => {
  input.addEventListener('input', () => updateReceipt(false));
});

const discountRates = {
  none: 0,
  senior: 0.2,
  pwd: 0.3,
  student: 0.1
};

// Add event listener to the discount select
const discountSelect = document.getElementById('discount-select');
discountSelect.addEventListener('change', () => applyDiscount());

// Function to update the receipt
function updateReceipt(applyDiscountFlag) {
  const receiptItems = document.getElementById('receipt-items');
  const totalSpan = document.getElementById('total');
  
  let total = 0;
  let notEnoughStocks = false; // Flag to check if there aren't enough stocks

  // Clear existing items
  receiptItems.innerHTML = '';

  // Reset stock counts to original values
  stockCounts.forEach((stockElement, i) => {
    stockElement.textContent = `Stocks: ${originalStocks[i]}`;
    checkboxes[i].setAttribute('data-stock', originalStocks[i]);
  });

  // Loop through checkboxes and update receipt
  checkboxes.forEach((checkbox, i) => {
    if (checkbox.checked) {
      const name = checkbox.getAttribute('data-name');
      const price = parseFloat(checkbox.getAttribute('data-price'));
      const stockElement = stockCounts[i];
      const originalStock = originalStocks[i];
      let quantity = parseInt(quantityInputs[i].value, 10) || 1; // Default to 1 if no quantity specified

      // Calculate remaining stock
      let remainingStock = originalStock;

      // Check if selected quantity exceeds available stock
      if (quantity > remainingStock) {
        notEnoughStocks = true;
        checkbox.checked = false; // Uncheck the checkbox
        quantity = 0; // Set quantity to 0 as it exceeds available stock
      } else {
        remainingStock -= quantity;
      }

      const itemTotal = price * quantity;
      total += itemTotal;

      // Only add item to receipt if quantity is within available stock
      if (quantity > 0) {
        receiptItems.innerHTML += `<li>${name} - ₱${itemTotal.toFixed(2)} (${quantity} item(s))</li>`;
      }

      // Update the displayed stock count
      stockElement.textContent = `Stocks: ${remainingStock}`;

      // Update data-stock attribute to reflect remaining stock
      checkbox.setAttribute('data-stock', remainingStock);
    }
  });

  // Update total without discount
  totalSpan.textContent = `₱${total.toFixed(2)}`;

  // Show or hide receipt
  document.querySelector('.receipt').style.display = total > 0 ? 'block' : 'none';

  // Notify user if there aren't enough stocks
  if (notEnoughStocks) {
    alert('Not enough stocks for selected items!');
  }

  // Apply discount if the flag is true
  if (applyDiscountFlag) {
    applyDiscount();
  }
}

// Function to apply discount
function applyDiscount() {
  const totalSpan = document.getElementById('total');
  let totalText = totalSpan.textContent;
  
  // Extract the total amount
  const totalMatch = totalText.match(/₱([\d,]+(?:\.\d{2})?)/);
  if (!totalMatch) return;

  let total = parseFloat(totalMatch[1].replace(/,/g, ''));
  const discountType = discountSelect.value;
  const discountRate = discountRates[discountType];
  
  // Calculate discount
  const discountAmount = total * discountRate;
  const discountedTotal = total - discountAmount;

  // Update total with discount
  totalSpan.innerHTML = `Total: ₱${total.toFixed(2)}<br>Discount: -₱${discountAmount.toFixed(2)}<br>Discounted Total: ₱${discountedTotal.toFixed(2)}`;
}

// Function to calculate change
function calculateChange() {
  const totalElement = document.getElementById('total');
  const totalText = totalElement.innerHTML;
  const discountedTotalMatch = totalText.match(/Discounted Total: ₱([\d,]+(\.\d{2})?)/);
  const total = discountedTotalMatch ? parseFloat(discountedTotalMatch[1].replace(',', '')) : parseFloat(totalText.replace(/₱|,/g, ''));
  const payment = parseFloat(document.getElementById('payment').value);
  const changeSpan = document.getElementById('change');
  
  if (isNaN(payment) || payment < total) {
    alert('Payment amount is not sufficient!');
    changeSpan.textContent = '₱0';
  } else {
    const change = payment - total;
    changeSpan.textContent = `₱${change.toFixed(2)}`;
  }
}
window.addEventListener('DOMContentLoaded', function() {
    var stocks = JSON.parse(localStorage.getItem('stocks')) || [];
    stocks.forEach(function(stock) {
        updateStockInMenu(stock.name, stock.quantity);
    });
});

// Listen for the custom 'stockAdded' event and update the stocks list
window.addEventListener('stockAdded', function(event) {
    var stock = event.detail;
    updateStockInMenu(stock.name, stock.quantity);
});

// Listen for the custom 'stockUpdated' event and update the data-stock attribute
window.addEventListener('stockUpdated', function(event) {
    var stock = event.detail;
    updateDataStockAttribute(stock.name, stock.quantity);
});

// Function to update the data-stock attribute
function updateDataStockAttribute(stockName, stockQuantity) {
    var menuItems = document.querySelectorAll('.menu-item');
    menuItems.forEach(function(menuItem) {
      var checkbox = menuItem.querySelector('.menu-item-checkbox');
      if (checkbox.dataset.name === stockName) {
        checkbox.dataset.stock = stockQuantity;

        var stockCountSpan = menuItem.querySelector('.stock-count');
        stockCountSpan.textContent = "Stocks: " + stockQuantity;
      }
    });
  }

  window.addEventListener('stockUpdated', function(event) {
    var stock = event.detail;
    updateDataStockAttribute(stock.name, stock.quantity);
});

function updateDataStockAttribute(stockName, stockQuantity) {
    var menuItems = document.querySelectorAll('.menu-item');
    menuItems.forEach(function(menuItem) {
        var checkbox = menuItem.querySelector('.menu-item-checkbox');
        if (checkbox.dataset.name === stockName) {
            checkbox.dataset.stock = stockQuantity;

            var stockCountSpan = menuItem.querySelector('.stock-count');
            stockCountSpan.textContent = "Stocks: " + stockQuantity;
        }
    });
}
window.addEventListener('load', function() {
            var socket = new WebSocket("ws://localhost:8765");
            socket.onopen = function(e) {
                console.log("[open] Connection established");
                console.log("Sending to server");
                socket.send("stocks");
            };

            socket.onmessage = function(event) {
                console.log(`[message] Data received from server: ${event.data}`);
                // Assuming event.data contains the updated stock information
                var data = JSON.parse(event.data);
                // Dispatch a custom event with the received stock information
                const stockUpdatedEvent = new CustomEvent('stockUpdated', { detail: { name: data.name, quantity: data.quantity } });
                window.dispatchEvent(stockUpdatedEvent);
            };

            socket.onclose = function(event) {
                if (event.wasClean) {
                    console.log(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
                } else {
                    // e.g. server process killed or network down
                    // event.code is usually 1006 in this case
                    console.log('[close] Connection died');
                }
            };

            socket.onerror = function(error) {
                console.log(`[error] ${error.message}`);
            };
        });
</script>

    

</html>